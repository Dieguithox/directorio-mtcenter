:root{
    --blue:#2b86d2; /* sidebar */
    --blue-2:#2b86d2; /* topbar */
    --adm-surface:#ffffff; 
    --adm-bg:#f6f8fb; 
    --adm-text:#0f172a; 
    --adm-blue:#60a5fa; 
    --adm-green:#86efac; 
    --adm-amber:#fde68a; 
    --adm-rose:#fda4af; 
    --adm-shadow:0 10px 24px rgba(2,8,23,.08); 
    --adm-radius:16px; 
}

/* Tipografías */
body{ font-family:Poppins,system-ui,Segoe UI,Roboto,Arial,sans-serif; overflow-x:hidden }
.brand-title{ font-family: "Inter", Segoe UI, system-ui, Arial, sans-serif; font-weight:700; letter-spacing:.2px }

/* SIDEBAR */
.sidebar{
    position:fixed; inset:0 auto 0 0; width:240px; background:var(--blue); color:#fff; 
    box-shadow:2px 0 18px rgba(2,8,23,.12); z-index:1030; transition:width .25s ease; 
    overflow-y: scroll; scrollbar-width:none; -ms-overflow-style: none; 
}
.sidebar::-webkit-scrollbar{display: none; }
.sidebar .brand{ display:flex; align-items:center; gap:.6rem; padding:.9rem 1rem; border-bottom:1px solid rgba(255,255,255,.18); 
    position: sticky; top: 0; z-index: 10; background:var(--blue); }
.brand-logo{ width:26px; height:26px; object-fit:contain }
.sidebar .toggle{ margin-left:auto; border:0; background:transparent; color:#fff; width:32px; height:32px; display:grid; place-items:center }
.sidebar .toggle:hover{ color:#dbeafe }
.sidebar ul{ list-style:none; padding:.5rem; margin:0 }
.sidebar .nav-link{ display:flex; align-items:center; gap:.6rem; color:#e6f1fb; padding:.7rem .8rem; border-radius:.6rem; text-decoration:none; font-weight:500 }
.sidebar .nav-link:hover{ background:rgba(255,255,255,.16); color:#fff }
.sidebar .nav-link.active{ background:rgba(255,255,255,.22); color:#fff }
.sidebar .nav-link .bi{ width:1.2rem; text-align:center }

/* Grupos */
.nav-group { padding: .25rem .5rem 0 .5rem }
.nav-group + .nav-group { margin-top: .35rem }
.nav-group-title{ font-size:.78rem; letter-spacing:.02em; color:rgba(255,255,255,.82); opacity:.85; margin:.5rem .5rem .1rem .5rem }
.sidebar.collapsed .nav-group-title{ display:none }

/* Colapso*/
.sidebar.collapsed{ width:74px }
.sidebar.collapsed .brand-title,
.sidebar.collapsed .nav-link span{ display:none }
.sidebar.collapsed .toggle i{ transform:rotate(180deg) }

/* TOPBAR */
.topbar{
    position:fixed; top:0; left:240px; right:0; z-index:1020; 
    background:var(--blue-2); color:#fff; padding:.55rem .9rem; 
    display:flex; align-items:center; gap:.75rem; box-shadow:0 2px 16px rgba(2,8,23,.12); 
    transition:left .25s ease; 
}

/* Contenido a la derecha */
.topbar-right{ margin-left:auto }

/* Buscador compacto */
.search-compact{
    display:flex; align-items:center; gap:.25rem; background:#fff; border-radius:999px; padding:.2rem .35rem .2rem .75rem; 
    box-shadow:0 6px 16px rgba(2,8,23,.08); 
}
.search-input{
    border:0; outline:0; width:220px; font-size:.95rem; 
}
.search-input:focus{ outline:0; box-shadow:none }
.search-btn{
    border:0; background:#f1f5f9; width:38px; height:38px; border-radius:999px; display:grid; place-items:center; 
}
.search-btn:hover{ background:#e2e8f0 }

/* Botón fantasma */
.btn-ghost{ background:rgba(255,255,255,.18); color:#fff; border:1px solid rgba(255,255,255,.25) }
.btn-ghost:hover{ background:#fff; color:#2b86d2 }

/* MAIN */
.main{ margin-top:58px; margin-left:240px; padding:1rem; transition:margin-left .25s ease }
body.sidebar-collapsed .topbar{ left:74px }
body.sidebar-collapsed .main { margin-left:74px }
.badge-role{ background:#ffa4a4; color:#b11d1d; font-weight:600 }

/* Responsive */
@media (max-width:991.98px){
    body.sidebar-collapsed .topbar{ left:74px }
    body.sidebar-collapsed .main { margin-left:74px }
    body:not(.sidebar-collapsed) .topbar{ left:240px }
    body:not(.sidebar-collapsed) .main { margin-left:240px }
}

/* LAYOUT DEL PANEL */
.main .adm-wrapper{
    max-width:1280px; width:100%; margin:0 auto; padding:0.75rem 1rem 1.5rem; 
    display:flex; flex-direction:column; gap:.75rem; min-height:calc(100vh - 58px); color:var(--adm-texto); background:transparent; 
}

/* KPIs */
.adm-kpis{
    width:100%; display:grid; grid-template-columns:repeat(4, minmax(0,1fr)); gap:.75rem; margin:.25rem 0 .75rem; 
}
.adm-kpi{
    display:flex; align-items:center; gap:.7rem; background:var(--adm-surface); 
    border:1px solid #e7eef7; border-radius:14px; padding:.8rem 1rem; box-shadow:var(--adm-shadow); position:relative; 
}

/* línea inferior de color */
.adm-kpi.is-blue::after,
.adm-kpi.is-green::after,
.adm-kpi.is-amber::after,
.adm-kpi.is-rose::after{
    content:""; position:absolute; inset:auto 0 0 0; height:5px; border-radius:0 0 14px 14px; 
}
.adm-kpi.is-blue::after  { background:var(--adm-blue,  #60a5fa) !important; }
.adm-kpi.is-green::after { background:var(--adm-green, #86efac) !important; }
.adm-kpi.is-amber::after { background:var(--adm-amber, #fde68a) !important; }
.adm-kpi.is-rose::after  { background:var(--adm-rose,  #fda4af) !important; }

/* títulos */
.adm-kpi-title,.adm-kpi-title{ font-weight:700; color:#1f2b45 }
.adm-kpi-value,.adm-kpi-value{
    font-weight:600; font-variant-numeric:tabular-nums; 
}

/* icono KPI */
.adm-kpi-icon{
    width:54px; height:54px; display:grid; place-items:center; font-size:1.5rem; 
    border-radius:12px; background:#fcfdff; color:#000000; border:1px solid #e6f1ff; 
}

/* KPIs responsive*/
@media (max-width:1200px){ .adm-kpis{ grid-template-columns:repeat(2,minmax(0,1fr)) } }
@media (max-width:576px){  .adm-kpis{ grid-template-columns:1fr } }

/* GRID PRINCIPAL */
.adm-grid{
    width:100%; display:grid; grid-template-columns:1.35fr 1fr; gap:.9rem; flex:1 1 auto; min-height:0; align-items:stretch; 
}
@media (max-width:1200px){ .adm-grid{ grid-template-columns:1fr } }

/* CARDS */
.adm-card{
    background:var(--adm-surface); border-radius:var(--adm-radius); box-shadow:var(--adm-shadow); 
    border:1px solid #e7eef7; overflow:hidden; display:flex; flex-direction:column; min-height:0; 
}

/* header/body */
.adm-card-header, .adm-card-header{
    padding:.9rem 1rem; display:flex; align-items:center; gap:.75rem; border-bottom:1px solid #eef2f7; 
}
.adm-card-header h3{ margin:0; font-size:1.05rem; font-weight:800 }
.adm-card-body, .adm-card-body{ padding:.85rem 1rem; flex:1 1 auto; display:flex; min-height:0; position:relative; }

/* GRÁFICA */
#deptosChart{
    width: 100% !important;
    height: 100% !important;
    max-width: 500px;           /* tope de ancho, prueba 520-560 */
    max-height: 450px;          /* tope de alto */
    margin: 0 auto;             /* centrado */
}
@media (max-width:1200px){.adm-card .adm-card-body{ min-height: unset !important; } #deptosChart{ min-height: unset !important; }}
@media (max-width:768px){.adm-card .adm-card-body{ min-height: unset !important; }#deptosChart{ min-height: unset !important; }}
@media (max-width:576px){.adm-card .adm-card-body{ min-height: unset !important; }#deptosChart{ min-height: unset !important; }
}

/* Leyenda de la gráfica */
.adm-legend{ display:flex; flex-wrap:wrap; gap:.5rem; margin-left:auto; row-gap:.35rem }
.adm-legend-item{
    display:inline-flex; align-items:center; gap:.35rem; background:#f8fafc; border:1px solid #e7eef7; 
    padding:.25rem .5rem; border-radius:999px; font-size:.85rem; color:#334155; 
}
.adm-dot{ display:inline-block; width:10px; height:10px; border-radius:999px; background:var(--c,#000) }

/* ACTIVIDAD RECIENTE */
.adm-actions{ margin-left:auto; display:flex; align-items:center; gap:.5rem }
.adm-chip{
    display:inline-flex; align-items:center; gap:.45rem; background:#f5f6ff; border:1px solid #a3b8e5; 
    color:#57578f; border-radius:999px; height:34px; padding:0 .75rem; font-weight:600; cursor:pointer; 
}
.adm-chip:hover{ background:#eaf3ff }
.adm-activity{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:.5rem }
.adm-activity-item{
    display:grid; grid-template-columns:1fr auto; align-items:center; border:1px solid #e7eef7; 
    border-radius:12px; background:#fff; padding:.6rem .8rem; 
}
.adm-activity-text{ font-weight:600; color:#1f2b45 }
.adm-activity-time{ color:#64748b; font-size:.9rem }
.adm-empty{ text-align:center; padding:.9rem; color:#6b7280; background:#fbfdff; border:1px dashed #e0e6f3; border-radius:12px }
@media (max-width:576px){
    .adm-chip{ height:32px; padding:0 .6rem; font-size:.85rem }
    .adm-activity-item{ grid-template-columns:1fr; row-gap:.25rem }
    .adm-activity-time{ justify-self:start }
}
:root{
    --page-pad-x: clamp(8px, 1.1vw, 16px); 
    --page-pad-y: clamp(8px, 0.9vw, 14px); 
}
.main{
    padding: var(--page-pad-y) var(--page-pad-x) !important; 
}
.main .adm-wrapper{
    max-width: none !important; 
    width: 100% !important; 
    margin: 0 !important; 
    padding: 0 !important; 
}
.adm-kpis{ gap: .6rem !important; }
.adm-grid{ gap: .8rem !important; }
@media (min-width: 1440px){
    :root{ --page-pad-x: 12px; }
}

/* CSS Gestión de usuarios */
.avatar-iniciales {
    display: inline-grid; 
    place-items: center; 
    width: 36px; 
    height: 36px; 
    border-radius: 50%; 
    font-weight: 600; 
    font-size: 0.9rem; 
}

/* Apariencia general del badge */
.badge {
    border-radius: 999px; 
    font-weight: 600; 
    padding: .35rem .55rem; 
    letter-spacing: .2px; 
    box-shadow: 0 1px 3px rgba(2, 8, 23, .06); 
    border: 1px solid transparent; 
}
.badge.text-bg-danger {
    background-color: #ffcace !important; 
    color: #a20c36 !important; 
    border: 1px solid #ff9cab !important; 
}
.badge.text-bg-warning {
    background-color: #d3bcff !important; 
    color: #4a078d !important; 
    border: 1px solid #ba95ff !important; 
}
.badge.text-bg-secondary {
    background-color: #b7dfff !important; 
    color: #080e80 !important; 
    border: 1px solid #90c0ff !important; 
}

/* Administrador */
.avatar-danger {
    background-color: #ffcace !important; 
    color: #a20c36 !important; 
    border: 1px solid #ff9cab !important; 
}

/* Editor */
.avatar-warning {
    background-color: #d3bcff !important; 
    color: #4a078d !important; 
    border: 1px solid #ba95ff !important; 
}

/* Consultor */
.avatar-secondary {
    background-color: #b7dfff !important; 
    color: #080e80 !important; 
    border: 1px solid #90c0ff !important; 
}

@media (max-width: 768px) {
    .acciones-usuario span {display: none; }
    .acciones-usuario {justify-content: center; }
}

.pagination .page-link {border-radius: 6px !important; padding: 4px 10px; }
.pagination .page-item.active .page-link {background-color: #f2f4f8; color: #000; border-color: #d0d0d0; font-weight: 600; }
.pagination .page-item.disabled .page-link {color: #ccc; }

.badge-day {display: inline-block; padding: .25rem .5rem; border-radius: 999px; font-size: .75rem; font-weight: 600}
.badge-a {background: #e1c5fe; color: #6b21a8; border: 1px solid #e9d5ff}
.badge-b {background: #d4eeff; color: #075985; border: 1px solid #bae6fd}
.badge-c {background: #ffd1f3; color: #991b1b; border: 1px solid #fecaca}
.pill-time {
    display: inline-block; padding: .25rem .5rem; border-radius: 8px; background: #f8fafc; 
    color: #0f172a; border: 1px solid #e2e8f0; font-variant-numeric: tabular-nums
}

/* NOTIFICACIÓN */
.notif-drawer {position: fixed; top: 0; right: -360px; width: 360px; max-width: 100%; height: 100vh; background: #ffffff; box-shadow: -2px 0 12px rgba(15, 23, 42, 0.18); 
transition: right .3s ease; z-index: 1055; display: flex; flex-direction: column; font-family: "Inter", system-ui, -apple-system, "Segoe UI", sans-serif; }
.notif-drawer.is-open {right: 0; }
.notif-drawer-header {padding: 1rem .75rem; border-bottom: 1px solid rgba(15, 23, 42, 0.08); display: flex; align-items: center; justify-content: space-between; }
.notif-drawer-body {padding: .75rem; overflow-y: auto; flex: 1; }
.notif-card {display: flex; gap: .75rem; background: #f8fafc; border: 1px solid rgba(148, 163, 184, 0.25); border-radius: .75rem; 
padding: .6rem .7rem; margin-bottom: .6rem; align-items: flex-start; transition: transform .15s ease, background .15s ease; }

.notif-card:hover {transform: translateX(-3px); background: #e5edff; box-shadow: 0 6px 18px rgba(15, 23, 42, 0.15); }
.notif-avatar {width: 36px; height: 36px; border-radius: 9999px; background: #e2e8f0; display: inline-flex; align-items: center; justify-content: center; font-weight: 600; color: #0f172a; }
.notif-title {font-weight: 600; font-size: .86rem; color: #0f172a; }
.notif-meta {font-size: .68rem; color: #6b7280; }
.notif-badges { display: flex; gap: .4rem; flex-wrap: wrap; margin-top: .25rem; }
.badge-soft {display: inline-flex; align-items: center; gap: .25rem; border-radius: 9999px; font-size: .6rem; padding: .15rem .45rem; background: #e2e8f0; color: #0f172a; }
.notif-card.is-green { background: #ecfdf3; border-color: rgba(22,163,74,.25); }
.badge-soft--green { background: #dcfce7; color: #166534; }
.notif-avatar.is-green { background: #22c55e; color: #fff; }

.notif-card.is-amber { background: #fef9c3; border-color: rgba(217,119,6,.25); }
.badge-soft--amber { background: #fde68a; color: #b45309; }
.notif-avatar.is-amber { background: #f97316; color: #fff; }

.notif-card.is-rose { background: #fff1f2; border-color: rgba(244,63,94,.25); }
.badge-soft--rose { background: #fecdd3; color: #be123c; }
.notif-avatar.is-rose { background: #f43f5e; color: #fff; }

.notif-drawer-body::-webkit-scrollbar {width: 4px; }
.notif-drawer-body::-webkit-scrollbar-thumb {background: rgba(148, 163, 184, 0.6); border-radius: 9999px; }

/* ESTILOS PARA LA GESTIÓN DE NOTAS */
.notes-wrap { --card-r:18px; --soft:#f7f9fc; --ink:#0f172a; --muted:#64748b; --chip:#eef2ff; --chip-t:#4f46e5; }
.section-title{font-weight:700; color:var(--ink); margin-bottom:.5rem}
.section-subtle{background:var(--soft); border-radius:16px; padding:1rem 1.25rem}
.note-card{
    border:1px solid #e5e7eb; border-radius:var(--card-r); padding:16px; background:#fff; 
    box-shadow:0 1px 0 rgba(2,6,23,.04); transition:box-shadow .18s ease, transform .18s ease; 
}
.note-card:hover{ box-shadow:0 8px 24px rgba(2,6,23,.08); transform:translateY(-1px); }
.note-row{display:flex; gap:14px; align-items:flex-start}
.note-main{flex:1 1 auto; min-width:0}
.note-meta{display:flex; gap:8px; align-items:center; flex-wrap:wrap; color:var(--muted); font-size:.92rem}
.note-badges{display:flex; gap:8px; flex-wrap:wrap}
.badge-chip{background:#cde2ff; color: #255594; border:0; padding:.16rem .4rem; border-radius:910px; font-weight:600; }
.note-text {margin-top: .35rem; line-height: 1.55; color: #111827; font-size: 1rem; white-space: pre-wrap; }

.note-actions .btn{min-width:96px}
.note-avatar{width:42px; height:42px; border-radius:50%; display:grid; place-items:center; background:linear-gradient(135deg,#c6c6c6,#797979); color:#fff; font-weight:800; 
    box-shadow: inset 0 0 0 2px rgba(255,255,255,.35); }
.note-divider{height:1px; background:#eef2f7; margin:12px 0}
.card-nested{background:#fafbff; border:1px dashed #e6e8f0; border-radius:14px; padding:12px 14px}
.empty{
    border:1px dashed #d1d5db; border-radius:16px; padding:20px; color:var(--muted); display:flex; gap:10px; align-items:center
}
.empty i{opacity:.55}
.pill-time{background:#f3f4f6; font-weight:600; border-radius:999px; padding:.15rem .55rem}
.search-wrap{display:flex; gap:10px; align-items:center}
.search-wrap .input-group{max-width:520px}
.header-actions .btn{min-width:150px}

/* toast fix */
.toast-container{z-index:1080}

/* No “estirar” todas las tarjetas a la misma altura del grid */
.adm-grid{align-items: stretch !important;}

/* La tarjeta de la gráfica usará altura fija del cuerpo */
.adm-card-body.chart-fixed{height: 450px; min-height: 450px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; }

/* Altura FIJA + scroll del panel de actividad (solo esa card) */
.adm-card.is-activity .adm-card-body.adm-activity-scroll{max-height: auto; height: 450px; overflow-y: auto; overflow-x: hidden; flex: 1 1 auto;}
/* Firefox / IE legacy */
.adm-activity-scroll{ scrollbar-width: none; -ms-overflow-style: none; }
/* WebKit (Chrome, Edge, Safari) */
.adm-activity-scroll::-webkit-scrollbar{ width:0; height:0; }
/* Si aún tienes un min-height global que empuja los cards, anúlalo aquí solo para el dashboard */
.adm-card .adm-card-body{min-height: 0; }
/* Asegura que la card derecha no intente igualar alturas del track */
.adm-card.is-activity{ display: flex; flex-direction: column; align-self: stretch; }

/* Scroll visual más suave */
.adm-card.is-activity .adm-card-body.adm-activity-scroll::-webkit-scrollbar {
    width: 6px;
}
.adm-card.is-activity .adm-card-body.adm-activity-scroll::-webkit-scrollbar-thumb {
    background: rgba(100, 116, 139, 0.35);
    border-radius: 6px;
}

/* ==== Efecto hover para tarjetas del dashboard ==== */
.adm-card {
    transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
}
.adm-card:hover {
    transform: translateY(-4px);
    background: #ecf2ff;
    box-shadow: 0 16px 32px rgba(2, 8, 23, 0.12);
}

/* Cabecera y pie cambian de color junto al hover */
.adm-card:hover .adm-card-header,
.adm-card:hover .adm-card-footer {
    background-color: #ffffff; /* tono azul claro */
    border-color: #ffffff;
    transition: background-color .2s ease, border-color .2s ease;
}

/* Ajuste de texto para contraste */
.adm-card:hover .adm-card-header h3,
.adm-card:hover .adm-card-footer {
    color: #000000; /* azul de contraste */
}

/* ==== Hover para los KPIs del admin ==== */
.adm-kpi {
    transition: transform .2s ease, box-shadow .2s ease;
}

.adm-kpi:hover {
    transform: translateY(-3px);
    box-shadow: 0 14px 30px rgba(2, 8, 23, 0.12);
}

.adm-activity-item:hover {
transform: translateX(3px); box-shadow: 3px 3px 8px rgba(2, 8, 23, .05); border-color: #dbe7ff;
}

/* MÓDULO DE RESPALDO */
.backup-left-card {min-height: 250px;display: flex;}
.backup-history-card {min-height: 520px;}
.backup-history-item {background: #f8fafc;border: 1px solid #e2e8f0;border-radius: 14px;padding: .6rem .65rem;display: flex;align-items: 
center;justify-content: space-between;gap: .5rem;}
.backup-history-body {max-height: 465px;overflow-y: auto;display: flex;flex-direction: column;gap: .65rem;}